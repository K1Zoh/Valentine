<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" />
  <title>üíò Pour Lucie... üíò</title>

  <style>
    :root {
      --bg1: #ff9acb;
      --bg2: #ff4fa3;
      --card: #ffffff;
      --text: #3b0a2a;
      --accent: #ff2f8f;
      --accent2: #ff7cc1;
      --shadow: 0 20px 50px rgba(255, 47, 143, 0.3);
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      margin: 0;
      min-height: 100svh;
      display: grid;
      place-items: center;
      font-family: 'Segoe UI', system-ui, sans-serif;
      color: var(--text);
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow: hidden;
      perspective: 1000px;
    }

    /* Fond anim√© */
    .bg-blobs {
      position: fixed;
      inset: 0;
      z-index: -1;
      filter: blur(60px);
      opacity: 0.6;
    }

    /* Coeurs flottants */
    .heart-particle {
      position: absolute;
      pointer-events: none;
      animation: floatUp linear forwards;
      z-index: 10;
    }

    @keyframes floatUp {
      0% { transform: translateY(0) scale(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-100vh) scale(1.5) rotate(360deg); opacity: 0; }
    }

    /* Conteneur */
    .wrap { width: min(500px, 92vw); position: relative; z-index: 2; }

    .card {
      background: var(--card);
      border-radius: 40px;
      padding: 40px 25px;
      box-shadow: var(--shadow);
      text-align: center;
      border: 4px solid rgba(255, 255, 255, 0.8);
      transition: transform 0.3s ease;
    }

    h1 {
      font-size: clamp(2rem, 8vw, 3rem);
      margin: 0;
      background: linear-gradient(to right, #ff2f8f, #ff7cc1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .sub { font-size: 1.1rem; opacity: 0.8; margin-top: 10px; }

    /* Zone de jeu */
    .arena {
      position: relative;
      height: 300px;
      margin-top: 30px;
      background: rgba(255, 240, 248, 0.5);
      border-radius: 30px;
      overflow: hidden; /* Important pour ne pas que le bouton sorte de la carte */
    }

    .btn {
      position: absolute;
      border: none;
      padding: 16px 32px;
      font-size: 1.2rem;
      font-weight: 900;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    #yes {
      z-index: 100;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: white;
      box-shadow: 0 10px 20px rgba(255, 47, 143, 0.4);
      left: 50%;
      top: 40%;
      transform: translate(-50%, -50%);
    }

    #no {
      z-index: 90;
      background: #eee;
      color: #666;
      left: 50%;
      top: 70%;
      transform: translate(-50%, -50%);
      white-space: nowrap;
    }

    /* Overlay Victoire */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(10px);
      display: none;
      place-items: center;
      z-index: 1000;
    }

    .modal {
      background: white;
      padding: 40px;
      border-radius: 40px;
      text-align: center;
      max-width: 90%;
      animation: popIn 0.5s cubic-bezier(0.26, 0.53, 0.74, 1.48);
    }

    @keyframes popIn {
      0% { transform: scale(0); }
      100% { transform: scale(1); }
    }

    canvas#confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1100;
    }
  </style>
</head>
<body>

  <canvas id="confetti"></canvas>

  <div class="wrap">
    <div class="card">
      <h1>Lucie... üíû</h1>
      <p class="sub">J'ai un petit truc √† te demander.</p>
      
      <div class="arena" id="arena">
        <button id="yes" class="btn">OUI ! ‚ú®</button>
        <button id="no" class="btn">Non üôÉ</button>
      </div>
    </div>
  </div>

  <div class="overlay" id="overlay">
    <div class="modal">
      <h2>Gagn√© ! üòç</h2>
      <p>Pr√©pare-toi, √ßa va √™tre g√©nial.</p>
      <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHp6eXp6eXp6eXp6eXp6eXp6eXp6eXp6eXp6eXp6eXp6eCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l41lH4ADRtAYnGsLe/giphy.gif" width="200" style="border-radius:20px">
      <br><br>
      <button class="btn" onclick="location.reload()" style="position:static; background: #eee;">Recommencer ?</button>
    </div>
  </div>

  <script>
    const btnNo = document.getElementById('no');
    const btnYes = document.getElementById('yes');
    const arena = document.getElementById('arena');
    const overlay = document.getElementById('overlay');
    
    let scaleYes = 1;
    let noHits = 0;

    // --- Logique d'esquive am√©lior√©e ---
    const moveNo = () => {
      noHits++;
      
      // On r√©duit le bouton NON
      const newScale = Math.max(0.5, 1 - noHits * 0.1);
      
      // On agrandit le bouton OUI (exponentiel)
      scaleYes += 0.4;
      btnYes.style.transform = `translate(-50%, -50%) scale(${scaleYes})`;

      // Calcul d'une position qui n'est pas sous le curseur
      const rectArena = arena.getBoundingClientRect();
      const rectNo = btnNo.getBoundingClientRect();

      const padding = 20;
      const x = Math.random() * (rectArena.width - rectNo.width - padding * 2) + padding;
      const y = Math.random() * (rectArena.height - rectNo.height - padding * 2) + padding;

      btnNo.style.left = `${x}px`;
      btnNo.style.top = `${y}px`;
      btnNo.style.transform = `scale(${newScale})`;
      btnNo.style.position = 'absolute';
    };

    btnNo.addEventListener('mouseover', moveNo);
    btnNo.addEventListener('touchstart', (e) => { e.preventDefault(); moveNo(); });

    // --- Victoire ---
    btnYes.addEventListener('click', () => {
      overlay.style.display = 'grid';
      startConfetti();
    });

    // --- Syst√®me de confettis simplifi√© et performant ---
    function startConfetti() {
      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const particles = Array.from({ length: 100 }, () => ({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height - canvas.height,
        size: Math.random() * 10 + 5,
        color: `hsl(${Math.random() * 30 + 330}, 100%, 70%)`,
        speed: Math.random() * 3 + 2
      }));

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => {
          p.y += p.speed;
          ctx.fillStyle = p.color;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          ctx.fill();
          if (p.y > canvas.height) p.y = -20;
        });
        requestAnimationFrame(draw);
      }
      draw();
    }
  </script>
</body>
</html>
